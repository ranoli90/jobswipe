============================= test session starts ==============================
platform linux -- Python 3.11.2, pytest-9.0.2, pluggy-1.6.0 -- /home/brooketogo98/Sorce/venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /home/brooketogo98/Sorce
plugins: hypothesis-6.150.3, asyncio-1.3.0, anyio-4.12.1, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 5 items

backend/tests/test_auth.py::test_register Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
PASSED
backend/tests/test_auth.py::test_register_duplicate_email Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
PASSED
backend/tests/test_auth.py::test_login Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
Register response status: 200
Register response body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0QGV4YW1wbGUuY29tIiwiZXhwIjoxNzY5MzU2NTc3fQ.oN-6UBZ-8-nhTCz_hzJNrsCGBcBOfZsBJYzrwA7vilk', 'token_type': 'bearer', 'user': {'id': 'c978e067-d2e8-4b28-8d64-c60ea9679434', 'email': 'test@example.com', 'created_at': '2026-01-25T15:26:17.404854'}}
Login attempt: email=test@example.com, password=TestPass123!
User found: <backend.db.models.User object at 0x7fe96883a890>
Stored password hash: $argon2id$v=19$m=65536,t=3,p=4$ynlPyfk/ZyzlnJOydq7VWg$0L5IBK9rOOYrh3pVWSQ7irRi8xomOc9kYTg4942Fle8
Password verification result: True
Login response status: 200
Login response body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0QGV4YW1wbGUuY29tIiwiZXhwIjoxNzY5MzU2NTc4fQ.iLurBvji3yp3tqIsLGRs89z45gQvZ6IrHH_x6DFjL6g', 'token_type': 'bearer', 'user': {'id': 'c978e067-d2e8-4b28-8d64-c60ea9679434', 'email': 'test@example.com', 'created_at': '2026-01-25T15:26:17.404854'}}
PASSED
backend/tests/test_auth.py::test_login_incorrect_password Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
Login attempt: email=test@example.com, password=wrongpassword
User found: <backend.db.models.User object at 0x7fe9687316d0>
Stored password hash: $argon2id$v=19$m=65536,t=3,p=4$5rw35lzL+b+3tnbO2VtLaQ$VpFMDxWotWB88aRt/lCgedUKqlICNYmDpj/f4yFP9mE
Password verification result: False
PASSED
backend/tests/test_auth.py::test_get_me Warning: Could not connect to Vault: HTTPConnectionPool(host='vault', port=8200): Max retries exceeded with url: /v1/auth/token/lookup-self (Caused by NameResolutionError("HTTPConnection(host='vault', port=8200): Failed to resolve 'vault' ([Errno -2] Name or service not known)")), falling back to environment variables
Login attempt: email=test@example.com, password=TestPass123!
User found: <backend.db.models.User object at 0x7fe96a062890>
Stored password hash: $argon2id$v=19$m=65536,t=3,p=4$XQvB+B8DgDBm7P3fu3dOSQ$frR04I7xIMGXq9MLLwko0qJPnfCFVBXxatqazpNqOyI
Password verification result: True
PASSED

=============================== warnings summary ===============================
backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/db/database.py:36: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

backend/tests/test_auth.py::test_register
  /home/brooketogo98/Sorce/venv/lib/python3.11/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/venv/lib/python3.11/site-packages/passlib/context.py:653: PasslibWarning: handler names should be lower-case, and use underscores instead of hyphens: 'pbkdf2-sha256' => 'pbkdf2_sha256'
    handler = get_crypt_handler(elem)

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/auth.py:38: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('email')

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/auth.py:45: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('password')

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/auth.py:61: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/profile.py:43: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CandidateProfileResponse(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/jobs.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class JobMatch(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/jobs.py:44: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class JobCard(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/applications.py:22: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ApplicationTaskResponse(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/api/routers/applications.py:37: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ApplicationAuditLogResponse(BaseModel):

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'CandidateProfile.user' will copy column users.id to column candidate_profiles.user_id, which conflicts with relationship(s): 'User.profile' (copies users.id to candidate_profiles.user_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="profile"' to the 'CandidateProfile.user' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'JobIndex.job' will copy column jobs.id to column job_index.job_id, which conflicts with relationship(s): 'Job.index' (copies jobs.id to job_index.job_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="index"' to the 'JobIndex.job' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'UserJobInteraction.user' will copy column users.id to column user_job_interactions.user_id, which conflicts with relationship(s): 'User.interactions' (copies users.id to user_job_interactions.user_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="interactions"' to the 'UserJobInteraction.user' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'UserJobInteraction.job' will copy column jobs.id to column user_job_interactions.job_id, which conflicts with relationship(s): 'Job.interactions' (copies jobs.id to user_job_interactions.job_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="interactions"' to the 'UserJobInteraction.job' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'ApplicationTask.user' will copy column users.id to column application_tasks.user_id, which conflicts with relationship(s): 'User.tasks' (copies users.id to application_tasks.user_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="tasks"' to the 'ApplicationTask.user' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'ApplicationTask.job' will copy column jobs.id to column application_tasks.job_id, which conflicts with relationship(s): 'Job.tasks' (copies jobs.id to application_tasks.job_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="tasks"' to the 'ApplicationTask.job' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/services/domain_service.py:56: SAWarning: relationship 'ApplicationAuditLog.task' will copy column application_tasks.id to column application_audit_logs.task_id, which conflicts with relationship(s): 'ApplicationTask.audit_logs' (copies application_tasks.id to application_audit_logs.task_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="audit_logs"' to the 'ApplicationAuditLog.task' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    domains = db.query(Domain).all()

backend/tests/test_auth.py::test_register
backend/tests/test_auth.py::test_register_duplicate_email
backend/tests/test_auth.py::test_login
backend/tests/test_auth.py::test_login_incorrect_password
backend/tests/test_auth.py::test_get_me
  /home/brooketogo98/Sorce/backend/tracing.py:23: DeprecationWarning: Call to deprecated method __init__. (Since v1.35, the Jaeger supports OTLP natively. Please use the OTLP exporter instead. Support for this exporter will end July 2023.) -- Deprecated since version 1.16.0.
    jaeger_exporter = JaegerExporter(

backend/tests/test_auth.py::test_register
  /home/brooketogo98/Sorce/venv/lib/python3.11/site-packages/passlib/handlers/argon2.py:716: DeprecationWarning: Accessing argon2.__version__ is deprecated and will be removed in a future release. Use importlib.metadata directly to query for argon2-cffi's packaging metadata.
    _argon2_cffi.__version__, max_version)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================= 5 passed, 93 warnings in 31.70s ========================
